
    <head>
        <link rel="icon" href="data:,">
    </head>
    <body>
    <div data-hydration-id="1">
    <span data-hydration-id="4"></span>
    <span data-hydration-id="5"></span>
    <timber-clicker data-hydration-id="7" label="Count = "></timber-clicker>
    <button data-hydration-id="8">-</button>
    <button data-hydration-id="9">+</button>
</div>
    </body>
    <script src="../timberjs/runtime/module.ts" type="module"></script>
    <script>
    window.addEventListener('timber-init', () => {
        const {handleDirective} = Timber
        let selectorTarget = document;
        const { makeScopeProxy } = Timber
        const __defaultScope__ = makeScopeProxy({});
        
                        handleDirective("x-scope",
                        selectorTarget.querySelector("[data-hydration-id='1']"),
                        {dataGetter:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return {count: baseCount}
                            }
},
scopeId:`__scope_0`},
                        __defaultScope__
                        );
                        
                handleDirective("x-text",
                selectorTarget.querySelector("[data-hydration-id='4']"),
                {textCallback:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return  msg 
                            }
}}, 
                '__scope_0');
                
                handleDirective("x-text",
                selectorTarget.querySelector("[data-hydration-id='5']"),
                {textCallback:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return  count 
                            }
}}, 
                '__scope_0');
                
        (() => {
            const hydrate_timber_clicker = (element, $scope) => {
                const { handleDirective } = Timber
                let selectorTarget = element
                
                        handleDirective("x-on",
                        selectorTarget.querySelector("[data-hydration-id='1']"),
                        {event:`test`,
handler:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return console.log('test')
                            }
},
options:{},
target:`self`},
                        $scope
                        );
                        
                        handleDirective("x-on",
                        selectorTarget.querySelector("[data-hydration-id='3']"),
                        {event:`click`,
handler:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return (count--, $emit('input'))
                            }
},
options:{},
target:`self`},
                        $scope
                        );
                        
                handleDirective("x-text",
                selectorTarget.querySelector("[data-hydration-id='4']"),
                {textCallback:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return  label 
                            }
}}, 
                $scope);
                
                handleDirective("x-text",
                selectorTarget.querySelector("[data-hydration-id='5']"),
                {textCallback:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return  count 
                            }
}}, 
                $scope);
                
                        handleDirective("x-on",
                        selectorTarget.querySelector("[data-hydration-id='6']"),
                        {event:`click`,
handler:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return (count++, $emit('input'))
                            }
},
options:{},
target:`self`},
                        $scope
                        );
                        
            }
    
            class timber_clicker extends HTMLElement {

                static get observedAttributes() { return ['label','count']; }
                static get attributeTypes() { return {label:'str',count:'num'}; }

                constructor() {
                    // Always call super first in constructor
                    super();
                    const { makeScopeProxy } = Timber
                    this.$scope = makeScopeProxy({label:'Count is ',count:0})
                }

                connectedCallback() {
                    this.attachShadow({mode: 'open'});
                    const wrapper = document.createElement('template');
                    wrapper.innerHTML = `<div data-hydration-id="1"><button data-hydration-id="3">-</button><span data-hydration-id="4"></span><span data-hydration-id="5"></span><button data-hydration-id="6">+</button><!-- <div x-effect="(count++, $emit('test'))">Click Me</div> --></div>`
                    const element = wrapper.content.firstElementChild
                    // Element functionality written in here
                    hydrate_timber_clicker(wrapper.content, this.$scope)
                    for (const {name, value} of this.attributes) {
                        if (timber_clicker.observedAttributes.includes(name)) {
                            this.$scope[name] = this.parseAttr(name, value)
                        }
                    }
                    const style = document.createElement('style');
                    style.textContent = ``
                    this.shadowRoot.append(style, element)
                }

                attributeChangedCallback(name, oldValue, newValue) {
                    if (newValue !== oldValue) this.$scope[name] = this.parseAttr(name, newValue)
                }

                parseAttr(name, val) {
                    const type = timber_clicker.attributeTypes[name]
                    switch (type) {
                        case("bool"):
                            return (val === 'true')
                        case("num"):
                            return parseFloat(val)
                        default:
                            return val
                    }
                }

                getModelOptions() {
                    return {
                        attributeName: 'value',
                        eventName: 'input'
                    }
                }
                  
            }
    
          
          customElements.define('timber-clicker', timber_clicker);
        })()
                        handleDirective("x-model",
                        selectorTarget.querySelector("[data-hydration-id='7']"),
                        {boundVal:`count`,
customVal:undefined},
                        '__scope_0'
                        );
                        
                        handleDirective("x-on",
                        selectorTarget.querySelector("[data-hydration-id='8']"),
                        {event:`click`,
handler:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return count--
                            }
},
options:{},
target:`self`},
                        '__scope_0'
                        );
                        
                        handleDirective("x-on",
                        selectorTarget.querySelector("[data-hydration-id='9']"),
                        {event:`click`,
handler:function anonymous(additionalGlobals = {}
) {
with (additionalGlobals) {
                                return count++
                            }
},
options:{},
target:`self`},
                        '__scope_0'
                        );
                        
    })
    </script>